import { AfterViewInit, Component, OnInit } from '@angular/core';
import * as L from 'leaflet';
// import getMAC, { isMAC } from 'getmac';

@Component({
  selector: 'app-map',
  templateUrl: './map.component.html',
  styleUrls: ['./map.component.scss']
})
export class MapComponent implements AfterViewInit, OnInit {
  states = [
    {
      "type": "FeatureCollection",
      "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
      "features": [{
        "type": "Feature", "properties": { "REMARKS_2": null, "Country": "India", "State_Name": "Haryana", "State_Code": "06", "Dist_Name": "Faridabad", "Dist_Code": "088" }, "geometry": { "type": "Polygon", "coordinates": [[[77.220781859655219, 28.291479377494049], [77.21958300000027, 28.292790000000416], [77.215842000000322, 28.295181000000177], [77.213868015710347, 28.295367288455047], [77.207047, 28.296011000000128], [77.199738000000167, 28.299199], [77.195474000000146, 28.299361000000196], [77.189904, 28.297451], [77.183456, 28.296950000000145], [77.180336000000111, 28.300569000000102], [77.175454000000158, 28.304241000000154], [77.168701, 28.306761000000158], [77.162208000000177, 28.31085], [77.154992000000149, 28.313932000000186], [77.144622000000126, 28.32202], [77.141807, 28.32728], [77.140610000000137, 28.339478000000149], [77.140861000000129, 28.3462290000001], [77.142220000000151, 28.35267], [77.142769, 28.369552000000162], [77.140237, 28.383550000000177], [77.140845, 28.388680000000129], [77.142434, 28.391759000000143], [77.156327000000118, 28.400231000000183], [77.16577200000016, 28.408461], [77.179490000000129, 28.412370000000173], [77.19522100000016, 28.412531000000165], [77.205910000000117, 28.413400000000131], [77.215309000000147, 28.415741], [77.222748000000109, 28.41897], [77.240617000000128, 28.428859], [77.243188, 28.433680000000201], [77.2443, 28.44167], [77.243279000000129, 28.447491000000181], [77.239869, 28.453608000000198], [77.233116000000138, 28.45945], [77.226434, 28.460261000000166], [77.225745000000103, 28.46401], [77.227630000000133, 28.469749], [77.232398, 28.475800000000156], [77.236733000000115, 28.479691], [77.24265200000012, 28.484600000000164], [77.253968, 28.485541], [77.260101, 28.488429], [77.271111000000118, 28.497030000000102], [77.278054, 28.498149000000119], [77.285789, 28.496271000000199], [77.296273000000141, 28.491150000000111], [77.30095, 28.490120000000154], [77.306869, 28.490681], [77.314880000000116, 28.494569], [77.321701000000118, 28.499389], [77.326684000000157, 28.503451], [77.328988000000138, 28.508319000000135], [77.334474, 28.51109], [77.337737, 28.508971], [77.343194000000139, 28.50361], [77.360481000000149, 28.49786], [77.363961000000174, 28.492901], [77.364121, 28.485651], [77.369363000000163, 28.480689000000204], [77.376006, 28.476160000000103], [77.388168, 28.472819], [77.397895000000162, 28.471171000000133], [77.400033000000107, 28.4667], [77.394837, 28.462800000000126], [77.397797, 28.458641000000107], [77.408288000000127, 28.455600000000167], [77.41813600000016, 28.455789000000202], [77.42578, 28.454541000000113], [77.428299000000123, 28.444061], [77.43599800000014, 28.431610000000141], [77.44399300000012, 28.428971], [77.451478, 28.424859], [77.4561, 28.42098900000013], [77.468697000000105, 28.417530000000106], [77.474556, 28.413512000000189], [77.473861000000156, 28.40381200000018], [77.466844, 28.399682000000205], [77.46953500000015, 28.394301000000148], [77.485893, 28.379701], [77.492058000000142, 28.369520000000186], [77.494239, 28.358261000000134], [77.485177000000121, 28.350211], [77.466408, 28.3412100000001], [77.463753, 28.338011000000101], [77.465927, 28.33394], [77.47355600000013, 28.327880000000157], [77.48185600000015, 28.323620000000112], [77.495789000000102, 28.307042000000131], [77.49417, 28.300261000000202], [77.494765000000115, 28.29261], [77.492737, 28.280631000000135], [77.488083, 28.279120000000198], [77.472252, 28.28121], [77.464813, 28.277429], [77.467299, 28.269721000000168], [77.482802889192428, 28.263480090769171], [77.492171731545895, 28.251059225334863], [77.487115376908534, 28.244961856507409], [77.486966660595826, 28.231874820975342], [77.489940986852943, 28.228454345779475], [77.482951320148317, 28.22488515427073], [77.482505171209738, 28.219531367007615], [77.476407802382298, 28.218490352817575], [77.470756582493422, 28.212392983990121], [77.46852583780047, 28.215813459185988], [77.465254078917482, 28.210905820861505], [77.462279752660194, 28.20763406197846], [77.461238738470101, 28.210757104548627], [77.459156710090014, 28.213136565554457], [77.452315759698237, 28.208823792481375], [77.440418454669086, 28.210013522984291], [77.440269738356264, 28.212987849241578], [77.433577504277352, 28.218044203878996], [77.430454461707185, 28.217746771253239], [77.426141688634104, 28.212095551364424], [77.424059660254031, 28.213880147118793], [77.422126348186779, 28.213136565554457], [77.418854589303791, 28.20971609035859], [77.415285397795046, 28.209269941419954], [77.414690532543588, 28.212541700302999], [77.410229043157628, 28.217151906001781], [77.383460106842207, 28.227859480528021], [77.377511454327632, 28.232320969913978], [77.376916589076004, 28.239013203992833], [77.373347397567258, 28.24421827494313], [77.367250028739804, 28.244515707568834], [77.363383404605358, 28.241838813937299], [77.358921915219398, 28.243772126004494], [77.346132312313074, 28.243772126004494], [77.340481092424213, 28.254925849469366], [77.337060617228516, 28.254479700530734], [77.326204326389231, 28.264741126118388], [77.314455737673129, 28.26860775025289], [77.308655801471261, 28.265930856621303], [77.299435390073626, 28.270987211258721], [77.294230319123571, 28.271582076510178], [77.284117609848622, 28.271730792823], [77.274599765825286, 28.275299984331749], [77.255266645152957, 28.276192282208964], [77.251697453644212, 28.27411025382883], [77.249020560012795, 28.259387338855269], [77.238320867444585, 28.264792338193836], [77.23459507766475, 28.266674438185639], [77.231987895321012, 28.271035853389542], [77.237635218389912, 28.272649374266273], [77.237040353138454, 28.279787757283767], [77.231983998501036, 28.284844111921185], [77.223863, 28.288111000000178], [77.220781859655219, 28.291479377494049]]] }
      }]
    }
  ];
  private map;
  private markers;
  constructor() {
    this.markers = [
      { lat: 28.7041, long: 77.1025, cases: 45 },
      { lat: 28.7752, long: 75.9928, cases: 1 },
      { lat: 26.9124, long: 75.7873, cases: 2 },
      { lat: 19.0760, long: 72.8777, cases: 3 },
      { lat: 12.9716, long: 77.5946, cases: 12 },
      { lat: 22.6019, long: 88.3656, cases: 123 }
    ];
  }
  ngOnInit(): void {
    // console.log(getMAC());
    // console.log(getMAC('eth0'));
  }

  ngAfterViewInit(): void {
    this.initMap();
    const tiles = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      minZoom: 2,
      maxZoom: 19,
      attribution: `&copy; <a href='http://www.openstreetmap.org/copyright'>OpenStreetMap</a>`
    });

    tiles.addTo(this.map);
  }
  private initMap(): void {
    let m: L.Marker;
    this.map = L.map('map', {
      center: [20.5937, 78.9629],
      zoom: 5
    });
    this.markers.forEach(element => {
      const x = element.cases.toString();
      m = L.marker([element.lat, element.long]).bindTooltip('coroana cases: ' + x).addTo(this.map);
      // m = L.marker([element.lat, element.long]).bindPopup('coroana cases: ' + x).addTo(this.map);
      // m = L.marker.bind('{{element.cases}}').addTo(this.map);
    });
    // L.geoJson(statesData, {style: this.style}).addTo(this.map);
    L.geoJSON(this.states, {
      style: (feature) => {
        // switch (feature.properties.party) {
        // case 'Republican': return { color: '#ff0000' };
        return { color: '#0000ff' };
        // }
      }
    }).addTo(this.map);

  }

  // style(feature) {
  //   return {
  //     fillColor: this.getColor(feature.properties.density),
  //     weight: 2,
  //     opacity: 1,
  //     color: 'white',
  //     dashArray: '3',
  //     fillOpacity: 0.7
  //   };
  // }

  // getColor(d) {
  //   return d > 1000 ? '#800026' :
  //     d > 500 ? '#BD0026' :
  //       d > 200 ? '#E31A1C' :
  //         d > 100 ? '#FC4E2A' :
  //           d > 50 ? '#FD8D3C' :
  //             d > 20 ? '#FEB24C' :
  //               d > 10 ? '#FED976' :
  //                 '#FFEDA0';
  // }
}
